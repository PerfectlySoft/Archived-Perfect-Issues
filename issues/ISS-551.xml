<!-- 
RSS generated by JIRA (7.3.0#73011-sha1:3c73d0e0b5ea20e2128531b9adf9b0585752b90a) at Tue Feb 06 20:51:59 UTC 2018

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
http://jira.perfect.org:8080/si/jira.issueviews:issue-xml/ISS-551/ISS-551.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>PerfectlySoft JIRA</title>
    <link>http://jira.perfect.org:8080</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>7.3.0</version>
        <build-number>73011</build-number>
        <build-date>03-01-2017</build-date>
    </build-info>

<item>
            <title>[ISS-551] Perfect-Redis:  Large bulk string responses blow up with a bad access exception</title>
                <link>http://jira.perfect.org:8080/browse/ISS-551</link>
                <project id="10007" key="ISS">Issues</project>
                    <description>&lt;p&gt;I have an LRANGE with 504&#160;string elements (in JSON format) that Perfect-Redis seems to choke on with a bad access exception. &#160;The initial parsing seems fine and also seems to work on small sets, but at sufficient size, I get ~707 frames of backtrace depth and a subsequent crash. &#160;In some cases, I have observed&#160;data corruption on large data sets as well. &#160;I&apos;ve attached a screen shot of the backtrace depth, as well as the exception. &#160;I&apos;ve isolated the problem consistently, so I&apos;ve also got a git repo with the code I used to replicate the problem:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/ptumati/PerfectRedisBugReplicator.git&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/ptumati/PerfectRedisBugReplicator.git&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;To replicate the problem, create a list with 600 or 700 rows with a string that looks like the one that returns from this LRANGE command:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;127.0.0.1:6379&amp;gt; LRANGE FatBotSimPendingQueue_CRASH 0 10
&#160;1) &quot;{\&quot;binary\&quot;:\&quot;FatBotSim\&quot;,\&quot;date\&quot;:\&quot;20170912\&quot;,\&quot;parameters\&quot;:[\&quot;--symbol=PG\&quot;,\&quot;--db=20170912_PG\&quot;,\&quot;--date=20170912\&quot;,\&quot;--preset=0\&quot;,\&quot;--outliermode=0\&quot;]}&quot;
&#160;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Then perform an LRANGE operation like in the sample code in the git repo. &#160;You will get a crash as identified by the screenshots I attached in PerfectRedis.swift &#8211; line 152, in the bulkString case.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="11413">ISS-551</key>
            <summary>Perfect-Redis:  Large bulk string responses blow up with a bad access exception</summary>
                <type id="10102" iconUrl="http://jira.perfect.org:8080/secure/viewavatar?size=xsmall&amp;avatarId=10303&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="http://jira.perfect.org:8080/images/icons/priorities/high.svg">High</priority>
                        <status id="5" iconUrl="http://jira.perfect.org:8080/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="10000">Done</resolution>
                                        <assignee username="rocky">Rockford Wei</assignee>
                                    <reporter username="ptumati">Pavan Tumati</reporter>
                            <created>Sat, 28 Oct 2017 21:18:05 -0400</created>
                <updated>Tue, 30 Jan 2018 11:07:45 -0500</updated>
                            <resolved>Tue, 30 Jan 2018 11:07:45 -0500</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="12025" author="rocky" created="Wed, 24 Jan 2018 09:08:06 -0500"  >&lt;p&gt;Hi Pavan, could you please confirm if the issue persists after merging your PR?&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/PerfectlySoft/Perfect-Redis/pull/7/files&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/PerfectlySoft/Perfect-Redis/pull/7/files&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Thank you.&lt;/p&gt;</comment>
                            <comment id="12028" author="ptumati" created="Wed, 24 Jan 2018 10:37:42 -0500"  >&lt;p&gt;The issue persists. &#160;My PR enabled the json strings to be sent as values, and the system works for small amounts of data. &#160;However, when I tried to blast the system with huge JSON strings, it blew up.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I sent Kyle Jessup an invite to the private repo with the code that creates the issue for your testing purposes.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="12029" author="ptumati" created="Wed, 24 Jan 2018 10:39:01 -0500"  >&lt;p&gt;(Note, I migrated away from this redis driver and have not been keeping my fork up to date &#8211; so if there has been further work on this I have not been tracking it.)&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="12032" author="rocky" created="Wed, 24 Jan 2018 16:29:59 -0500"  >&lt;p&gt;Thanks for the note, I will check it out soon.&lt;/p&gt;</comment>
                            <comment id="12034" author="rocky" created="Tue, 30 Jan 2018 11:07:45 -0500"  >&lt;p&gt;&lt;a href=&quot;https://github.com/PerfectlySoft/Perfect-Redis/pull/8&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/PerfectlySoft/Perfect-Redis/pull/8&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10000">
                    <name>Blocks</name>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="11447">ISS-585</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="10600" name="Screen Shot 2017-10-28 at 7.11.46 PM.png" size="1170234" author="ptumati" created="Sat, 28 Oct 2017 21:15:42 -0400"/>
                            <attachment id="10601" name="Screen Shot 2017-10-28 at 7.12.27 PM.png" size="218003" author="ptumati" created="Sat, 28 Oct 2017 21:15:20 -0400"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10400" key="com.atlassian.servicedesk.approvals-plugin:sd-approvals">
                        <customfieldname>Approvals</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10500" key="com.atlassian.servicedesk:sd-customer-organizations">
                        <customfieldname>Organizations</customfieldname>
                        <customfieldvalues>
                                
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10005" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i00487:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10101" key="com.atlassian.servicedesk:sd-request-participants">
                        <customfieldname>Request participants</customfieldname>
                        <customfieldvalues>
                                
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_10104" key="com.atlassian.servicedesk:sd-sla-field">
                        <customfieldname>Time to resolution</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>
</channel>
</rss>